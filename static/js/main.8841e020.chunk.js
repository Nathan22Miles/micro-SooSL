(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,s){},17:function(t,e,s){t.exports=s(27)},22:function(t,e,s){},27:function(t,e,s){"use strict";s.r(e);var i,n=s(0),o=s.n(n),a=s(6),r=s.n(a),c=(s(22),s(4)),l=s(2),h=s(3),u=s(9),d=s(8),m=s(10),f=s(7),v=s(5),p=(s(14),s(11)),g=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("video",{className:"CitationPlayer",controls:!0,src:this.props.url,autoPlay:!0}))}}]),e}(o.a.Component),x=(s(15),function(t){var e=t.root;return o.a.createElement("div",null,o.a.createElement("div",{className:"Header"},"micro-SooSL"),o.a.createElement("div",{className:"Top"},o.a.createElement(b,{root:e}),o.a.createElement(O,{root:e}),o.a.createElement(_,{root:e})))}),b=function(t){var e=t.root,s=e.filteredGlossTexts;return o.a.createElement("div",{className:"GlossesList"},s.map(function(t,s){return o.a.createElement(j,{key:s,glossText:t,root:e})}))},j=function(t){var e=t.glossText,s=t.root,i=s.selectedGlossText,n="Gloss"+(i&&i.text===e.text?" GlossSelected":"");return o.a.createElement("div",{className:n,onClick:function(){s.selectedGlossText=e}},o.a.createElement("div",null,e.text))},O=function(t){var e=t.root.selectedGlossText;if(!e)return null;var s=e.sens.sign;return s?o.a.createElement("div",{className:"Citation"},o.a.createElement(g,{url:"demo/".concat(s.path.slice(2))})):null},_=function(t){var e=t.root;return o.a.createElement("div",{className:"TextInfo"},o.a.createElement(E,{root:e}),o.a.createElement(w,{root:e}))},E=function(t){var e=t.root.selectedGlossText;if(!e)return null;var s=e.sens.gloss_texts;return o.a.createElement("div",{className:"GlossTexts"},s.map(function(t,e){return o.a.createElement(T,{key:e,glossText:t})}))},T=function(t){var e=t.glossText;return o.a.createElement("div",{className:"GlossText"},o.a.createElement("div",null,e.text))},w=function(t){var e=t.root.selectedGlossText;if(!e)return null;var s=e.sens.sentences;return o.a.createElement("div",{className:"Sentences"},s.map(function(t,e){return o.a.createElement(y,{key:e,sentence:t})}))},y=function(t){var e=t.sentence;return o.a.createElement("div",{className:"Sentence"},o.a.createElement("div",null,e.sentence_texts[0].text))},G=[["598",function(t){return o.a.createElement("ellipse",Object.assign({},t,{ry:"16",rx:"25.5",cy:"138.4375",cx:"242"}))}],["638",function(t){return o.a.createElement("ellipse",Object.assign({},t,{ry:"16",rx:"25.5",cy:"139.4375",cx:"329"}))}]];function k(t){var e=t.featureName,s=t.contents,i=t.root;return s({className:i.positions.includes(e)?"selected-feature":"unselected-feature",onClick:function(){console.log("onClick",e);var t=i.positions.slice(),s=t.indexOf(e);s>=0?t.splice(s,1):t.push(e),i.setPositions(t)}})}var N,S,C,P,L,z,B,D,M,I=Object(p.a)(i=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return this.props.root.positions.join(""),o.a.createElement("div",null,o.a.createElement("svg",{width:"580",height:"400"},o.a.createElement("ellipse",{ry:"154.5",rx:"111.5",cy:"200.9375",cx:"287",fill:"#00f"}),G.map(function(e){return o.a.createElement(k,{key:e[0],featureName:e[0],contents:e[1],root:t.props.root})})))}}]),e}(n.Component))||i,J=s(1),W=s(16),A=s.n(W),H=(N=function(){function t(){Object(l.a)(this,t),Object(c.a)(this,"project",S,this),Object(c.a)(this,"positions",C,this),Object(c.a)(this,"glossTexts",P,this),Object(c.a)(this,"filteredGlossTexts",L,this),Object(c.a)(this,"selectedGlossText",z,this)}return Object(h.a)(t,[{key:"setPositions",value:function(t){console.log("setPositions",t),t.length?this.filteredGlossTexts=this.glossTexts.filter(function(e){return e.sens.sign.components.some(function(e){return t.includes(e.code)})}):this.filteredGlossTexts=this.glossTexts,this.filteredGlossTexts.length?this.selectedGlossText=this.filteredGlossTexts[0]:this.selectedGlossText=void 0,this.positions=t}},{key:"setGlossTexts",value:function(){var t=[];(this.project&&this.project.signs||[]).forEach(function(e){e.senses.forEach(function(e){e.gloss_texts.length&&t.push(e.gloss_texts[0])})}),this.glossTexts=A.a.sortBy(t,function(t){return t.text.toLowerCase()}),console.log("glossTexts",this.glossTexts.length),t.length&&(this.selectedGlossText=this.glossTexts[0])}}]),t}(),S=Object(v.a)(N.prototype,"project",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(v.a)(N.prototype,"positions",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=Object(v.a)(N.prototype,"glossTexts",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Object(v.a)(N.prototype,"filteredGlossTexts",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=Object(v.a)(N.prototype,"selectedGlossText",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N),$=function t(e){Object(l.a)(this,t),this.code=void 0,this.description=void 0,this.code=e.code,this.description=e.description},q=function t(e){Object(l.a)(this,t),this.id=void 0,this.abbr=void 0,this.focal=void 0,this.name=void 0,this.id=e.id,this.abbr=e.abbr,this.focal=e.focal,this.name=e.name},F=function t(e){Object(l.a)(this,t),this.id=void 0,this.name=void 0,this.id=e.id,this.name=e.name},K=function t(e){Object(l.a)(this,t),this.lang_name=void 0,this.lang_id=void 0,this.order=void 0,this.text=void 0,this.lang_name=e.lang_name,this.lang_id=e.lang_id,this.order=e.order,this.text=e.text},Q=function t(e){Object(l.a)(this,t),this.id=void 0,this.path=void 0,this.hash=void 0,this.sentence_texts=void 0,this.id=e.id,this.path=e.path,this.hash=e.hash,this.sentence_texts=(e.sentence_texts||[]).map(function(t){return new K(t)})},R=function t(e){Object(l.a)(this,t),this.lang_name=void 0,this.lang_id=void 0,this.order=void 0,this.text=void 0,this.lang_name=e.lang_name,this.lang_id=e.lang_id,this.order=e.order,this.text=e.text},U=function t(e){Object(l.a)(this,t),this.id=void 0,this.path=void 0,this.hash=void 0,this.id=e.id,this.path=e.path,this.hash=e.hash},V=function t(e,s){Object(l.a)(this,t),this.sens=void 0,this.lang_name=void 0,this.lang_id=void 0,this.order=void 0,this.text=void 0,this.sens=e,this.lang_name=s.lang_name,this.lang_id=s.lang_id,this.order=s.order,this.text=s.text},X=function t(e,s){var i=this;Object(l.a)(this,t),this.sign=void 0,this.id=void 0,this.dialects=void 0,this.grammar_category=void 0,this.gloss_texts=void 0,this.sentences=void 0,this.extra_texts=void 0,this.extra_media_files=void 0,this.sign=e,this.id=s.id,this.grammar_category=new F(s.grammar_category),this.dialects=(s.dialects||[]).map(function(t){return new q(t)}),this.gloss_texts=(s.gloss_texts||[]).map(function(t){return new V(i,t)}),this.sentences=(s.sentences||[]).map(function(t){return new Q(t)}),this.extra_texts=(s.extra_texts||[]).map(function(t){return new R(t)}),this.extra_media_files=(s.extra_media_files||[]).map(function(t){return new U(t)})},Y=function t(e){var s=this;Object(l.a)(this,t),this.id=void 0,this.path=void 0,this.hash=void 0,this.components=void 0,this.senses=void 0,this.id=e.id,this.path=e.path,this.hash=e.hash,this.components=(e.components||[]).map(function(t){return new $(t)}),this.senses=(e.senses||[]).map(function(t){return new X(s,t)})},Z=function t(e){Object(l.a)(this,t),this.sooSL_version=void 0,this.project_name=void 0,this.project_description=void 0,this.signs=void 0,this.sooSL_version=e.SooSL_version,this.project_name=e.Project_name,this.project_description=e.Project_description,this.signs=(e.Signs||[]).map(function(t){return new Y(t)})},tt=Object(p.a)((D=function(t){function e(t){var s;return Object(l.a)(this,e),(s=Object(u.a)(this,Object(d.a)(e).call(this,t))).root=new H,Object(c.a)(s,"message",M,Object(f.a)(Object(f.a)(s))),s.componentDidMount=s.componentDidMount.bind(Object(f.a)(Object(f.a)(s))),s}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return this.root.selectedGlossText,this.root.positions.length,this.message?o.a.createElement("div",null,this.message," "):o.a.createElement("div",{className:"App"},o.a.createElement(I,{root:this.root}),o.a.createElement(x,{root:this.root}))}},{key:"componentDidMount",value:function(){var t=this;fetch("demo/project.json").then(function(t){return t.json()}).then(function(e){console.log("json",e),t.root.project=new Z(e),t.root.setGlossTexts(),t.root.setPositions([]),t.message=""}).catch(function(e){t.message=e.message})}}]),e}(n.Component),M=Object(v.a)(D.prototype,"message",[J.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Loading..."}}),B=D))||B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.8841e020.chunk.js.map